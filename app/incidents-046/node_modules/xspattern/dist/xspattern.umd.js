!function(A,B){"object"==typeof exports&&"undefined"!=typeof module?B(exports,require("whynot")):"function"==typeof define&&define.amd?define(["exports","whynot"],B):B((A="undefined"!=typeof globalThis?globalThis:A||self).xspattern={},A.whynot)}(this,(function(A,B){"use strict";function a(A){return B=>B===A}function n(A,B){if(null===A||null===B)throw new Error("unescaped hyphen may not be used as a range endpoint");if(B<A)throw new Error("character range is in the wrong order");return a=>A<=a&&a<=B}function e(A){return!0}function t(){return!1}function G(A,B){return a=>A(a)||B(a)}function i(A,B){switch(B.kind){case"predicate":return void A.test(B.value);case"regexp":return void o(A,B.value,!1)}}function r(A,B){B.forEach(B=>{!function(A,B){const[a,{min:n,max:e}]=B;if(null!==e){for(let B=0;B<n;++B)i(A,a);for(let B=n;B<e;++B){const B=A.jump([]);B.data.push(A.program.length),i(A,a),B.data.push(A.program.length)}}else if(n>0){for(let B=0;B<n-1;++B)i(A,a);const B=A.program.length;i(A,a),A.jump([B]).data.push(A.program.length)}else{const B=A.program.length,n=A.jump([]);n.data.push(A.program.length),i(A,a),A.jump([B]),n.data.push(A.program.length)}}(A,B)})}function o(A,B,a){const n=A.program.length,e=A.jump([]);a&&(e.data.push(A.program.length),A.test(()=>!0),A.jump([n]));const t=[];if(B.forEach(B=>{e.data.push(A.program.length),r(A,B),t.push(A.jump([]))}),t.forEach(B=>{B.data.push(A.program.length)}),a){const B=A.program.length,a=A.jump([]);a.data.push(A.program.length),A.test(()=>!0),A.jump([B]),a.data.push(A.program.length)}}function l(A,B){return{success:!0,offset:A,value:B}}function H(A){return l(A,void 0)}function u(A,B,a=!1){return{success:!1,offset:A,expected:B,fatal:a}}function C(A){return(B,a)=>{const n=a+A.length;return B.slice(a,n)===A?l(n,A):u(a,[A])}}function s(A,B){return(a,n)=>{const e=A(a,n);return e.success?l(e.offset,B(e.value)):e}}function c(A,B,a){return(n,e)=>{const t=A(n,e);return t.success?B(t.value)?t:u(e,a):t}}function D(A,B){return(a,n)=>{let e=null;for(const t of A){const A=t(a,n);if(A.success)return A;if(null===e||A.offset>e.offset?e=A:A.offset===e.offset&&void 0===B&&(e.expected=e.expected.concat(A.expected)),A.fatal)return A}return B=B||(null==e?void 0:e.expected)||[],e&&(e.expected=B),e||u(n,B)}}function m(A){return(B,a)=>{const n=A(B,a);return n.success||n.fatal?n:l(a,null)}}function h(A){return(B,a)=>{let n=[],e=a;for(;;){const a=A(B,e);if(!a.success){if(a.fatal)return a;break}if(n.push(a.value),a.offset===e)break;e=a.offset}return l(e,n)}}function d(A,B,a){return(n,e)=>{const t=A(n,e);if(!t.success)return t;const G=B(n,t.offset);return G.success?l(G.offset,a(t.value,G.value)):G}}function I(A){return d(A,h(A),(A,B)=>[A].concat(B))}function p(A,B){return A}function T(A,B){return B}function f(A,B){return d(A,B,T)}function E(A,B){return d(A,B,p)}function g(A,B,a,n=!1){return f(A,n?P(E(B,a)):E(B,a))}function F(A,B){return(a,n)=>A(a,n).success?u(n,B):H(n)}function P(A){return(B,a)=>{const n=A(B,a);return n.success?n:u(n.offset,n.expected,!0)}}const M=(A,B)=>A.length===B?H(B):u(B,["end of input"]);const J=["Lu","Ll","Lt","Lm","Lo","Mn","Mc","Me","Nd","Nl","No","Pc","Pd","Ps","Pe","Pi","Pf","Po","Zs","Zl","Zp","Sm","Sc","Sk","So","Cc","Cf","Co","Cn"],S={};function K(A){return A.codePointAt(0)}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach((A,B)=>{S[A]=B});const b=A=>-1===A||-2===A;function y(A){return B=>!b(B)&&!A(B)}function Q(A,B){return null===B?A:a=>A(a)&&!B(a)}const x=function(A,B){const a=new Map;let e=0;return A.forEach((A,t)=>{const i=B[t];null!==A&&A.split("|").forEach(A=>{const B=a.get(A),t=n(e,e+i-1);a.set(A,B?G(B,t):t)}),e+=i}),a}(["BasicLatin","Latin-1Supplement","LatinExtended-A","LatinExtended-B","IPAExtensions","SpacingModifierLetters","CombiningDiacriticalMarks","GreekandCoptic|Greek","Cyrillic","CyrillicSupplement","Armenian","Hebrew","Arabic","Syriac","ArabicSupplement","Thaana","NKo","Samaritan","Mandaic","SyriacSupplement",null,"ArabicExtended-A","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","HangulJamo","Ethiopic","EthiopicSupplement","Cherokee","UnifiedCanadianAboriginalSyllabics","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","UnifiedCanadianAboriginalSyllabicsExtended","Limbu","TaiLe","NewTaiLue","KhmerSymbols","Buginese","TaiTham","CombiningDiacriticalMarksExtended","Balinese","Sundanese","Batak","Lepcha","OlChiki","CyrillicExtended-C","GeorgianExtended","SundaneseSupplement","VedicExtensions","PhoneticExtensions","PhoneticExtensionsSupplement","CombiningDiacriticalMarksSupplement","LatinExtendedAdditional","GreekExtended","GeneralPunctuation","SuperscriptsandSubscripts","CurrencySymbols","CombiningDiacriticalMarksforSymbols|CombiningMarksforSymbols","LetterlikeSymbols","NumberForms","Arrows","MathematicalOperators","MiscellaneousTechnical","ControlPictures","OpticalCharacterRecognition","EnclosedAlphanumerics","BoxDrawing","BlockElements","GeometricShapes","MiscellaneousSymbols","Dingbats","MiscellaneousMathematicalSymbols-A","SupplementalArrows-A","BraillePatterns","SupplementalArrows-B","MiscellaneousMathematicalSymbols-B","SupplementalMathematicalOperators","MiscellaneousSymbolsandArrows","Glagolitic","LatinExtended-C","Coptic","GeorgianSupplement","Tifinagh","EthiopicExtended","CyrillicExtended-A","SupplementalPunctuation","CJKRadicalsSupplement","KangxiRadicals",null,"IdeographicDescriptionCharacters","CJKSymbolsandPunctuation","Hiragana","Katakana","Bopomofo","HangulCompatibilityJamo","Kanbun","BopomofoExtended","CJKStrokes","KatakanaPhoneticExtensions","EnclosedCJKLettersandMonths","CJKCompatibility","CJKUnifiedIdeographsExtensionA","YijingHexagramSymbols","CJKUnifiedIdeographs","YiSyllables","YiRadicals","Lisu","Vai","CyrillicExtended-B","Bamum","ModifierToneLetters","LatinExtended-D","SylotiNagri","CommonIndicNumberForms","Phags-pa","Saurashtra","DevanagariExtended","KayahLi","Rejang","HangulJamoExtended-A","Javanese","MyanmarExtended-B","Cham","MyanmarExtended-A","TaiViet","MeeteiMayekExtensions","EthiopicExtended-A","LatinExtended-E","CherokeeSupplement","MeeteiMayek","HangulSyllables","HangulJamoExtended-B","HighSurrogates","HighPrivateUseSurrogates","LowSurrogates","PrivateUseArea|PrivateUse","CJKCompatibilityIdeographs","AlphabeticPresentationForms","ArabicPresentationForms-A","VariationSelectors","VerticalForms","CombiningHalfMarks","CJKCompatibilityForms","SmallFormVariants","ArabicPresentationForms-B","HalfwidthandFullwidthForms","Specials","LinearBSyllabary","LinearBIdeograms","AegeanNumbers","AncientGreekNumbers","AncientSymbols","PhaistosDisc",null,"Lycian","Carian","CopticEpactNumbers","OldItalic","Gothic","OldPermic","Ugaritic","OldPersian",null,"Deseret","Shavian","Osmanya","Osage","Elbasan","CaucasianAlbanian",null,"LinearA",null,"CypriotSyllabary","ImperialAramaic","Palmyrene","Nabataean",null,"Hatran","Phoenician","Lydian",null,"MeroiticHieroglyphs","MeroiticCursive","Kharoshthi","OldSouthArabian","OldNorthArabian",null,"Manichaean","Avestan","InscriptionalParthian","InscriptionalPahlavi","PsalterPahlavi",null,"OldTurkic",null,"OldHungarian","HanifiRohingya",null,"RumiNumeralSymbols",null,"OldSogdian","Sogdian",null,"Elymaic","Brahmi","Kaithi","SoraSompeng","Chakma","Mahajani","Sharada","SinhalaArchaicNumbers","Khojki",null,"Multani","Khudawadi","Grantha",null,"Newa","Tirhuta",null,"Siddham","Modi","MongolianSupplement","Takri",null,"Ahom",null,"Dogra",null,"WarangCiti",null,"Nandinagari","ZanabazarSquare","Soyombo",null,"PauCinHau",null,"Bhaiksuki","Marchen",null,"MasaramGondi","GunjalaGondi",null,"Makasar",null,"TamilSupplement","Cuneiform","CuneiformNumbersandPunctuation","EarlyDynasticCuneiform",null,"EgyptianHieroglyphs","EgyptianHieroglyphFormatControls",null,"AnatolianHieroglyphs",null,"BamumSupplement","Mro",null,"BassaVah","PahawhHmong",null,"Medefaidrin",null,"Miao",null,"IdeographicSymbolsandPunctuation","Tangut","TangutComponents",null,"KanaSupplement","KanaExtended-A","SmallKanaExtension","Nushu",null,"Duployan","ShorthandFormatControls",null,"ByzantineMusicalSymbols","MusicalSymbols","AncientGreekMusicalNotation",null,"MayanNumerals","TaiXuanJingSymbols","CountingRodNumerals",null,"MathematicalAlphanumericSymbols","SuttonSignWriting",null,"GlagoliticSupplement",null,"NyiakengPuachueHmong",null,"Wancho",null,"MendeKikakui",null,"Adlam",null,"IndicSiyaqNumbers",null,"OttomanSiyaqNumbers",null,"ArabicMathematicalAlphabeticSymbols",null,"MahjongTiles","DominoTiles","PlayingCards","EnclosedAlphanumericSupplement","EnclosedIdeographicSupplement","MiscellaneousSymbolsandPictographs","Emoticons","OrnamentalDingbats","TransportandMapSymbols","AlchemicalSymbols","GeometricShapesExtended","SupplementalArrows-C","SupplementalSymbolsandPictographs","ChessSymbols","SymbolsandPictographsExtended-A",null,"CJKUnifiedIdeographsExtensionB",null,"CJKUnifiedIdeographsExtensionC","CJKUnifiedIdeographsExtensionD","CJKUnifiedIdeographsExtensionE","CJKUnifiedIdeographsExtensionF",null,"CJKCompatibilityIdeographsSupplement",null,"Tags",null,"VariationSelectorsSupplement",null,"SupplementaryPrivateUseArea-A|PrivateUse","SupplementaryPrivateUseArea-B|PrivateUse"],[128,128,128,208,96,80,112,144,256,48,96,112,256,80,48,64,64,64,32,16,48,96,128,128,128,128,128,128,128,128,128,128,128,128,256,160,96,256,384,32,96,640,32,96,32,32,32,32,128,176,80,80,48,96,32,32,144,80,128,64,64,80,48,16,48,16,48,128,64,64,256,256,112,48,48,48,80,64,112,256,256,64,32,160,128,32,96,256,192,48,16,256,128,128,256,256,96,32,128,48,80,96,32,128,128,224,16,16,64,96,96,48,96,16,32,48,16,256,256,6592,64,20992,1168,64,48,320,96,96,32,224,48,16,64,96,32,48,48,32,96,32,96,32,96,32,48,64,80,64,11184,80,896,128,1024,6400,512,80,688,16,16,16,32,32,144,240,16,128,128,64,80,64,48,128,32,64,32,48,32,48,32,64,32,80,48,48,80,48,64,144,384,128,64,32,32,48,48,32,32,32,64,32,96,96,32,32,32,64,64,32,32,48,80,80,48,128,64,288,32,128,48,64,112,32,128,80,48,80,48,96,32,80,48,48,80,128,128,128,96,160,128,96,32,80,48,64,192,80,80,96,160,96,80,96,16,64,256,112,80,64,96,80,304,32,192,64,1024,128,208,2736,1072,16,4032,640,8576,576,48,96,48,144,688,96,96,160,64,32,6144,768,9472,256,48,64,400,2304,160,16,4944,256,256,80,144,32,96,32,128,1024,688,1360,48,208,80,368,64,1280,224,32,96,784,80,64,80,176,256,256,48,112,96,256,256,768,80,48,128,128,128,256,256,112,144,1280,42720,32,4160,224,5776,7488,3088,544,722400,128,128,240,65040,65536,65536]),L=function(A){const B=new Map,e=A.split(""),i=J.map(()=>[]);let r=0,o=0;for(;o<e.length;){const A=S[e[o]],B=(31&A)-2;let t=1+S[e[o+1]];switch(32&A?(t+=S[e[o+2]]<<6,t+=S[e[o+3]]<<12,t+=S[e[o+4]]<<18,o+=5):o+=2,B){case-2:{let A=0;for(let B=r;B<r+t;++B){i[A].push(a(B)),A=(A+1)%2}break}case-1:break;default:{const A=i[B];1===t?A.push(a(r)):A.push(n(r,r+t-1));break}}r+=t}const l=new Map;return J.forEach((A,a)=>{const n=i[a].reduce(G,t);B.set(A,n);const e=A.charAt(0),r=l.get(e)||[];l.set(e,r),r.push(n)}),l.forEach((A,a)=>{B.set(a,A.reduce(G,t))}),B}("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");function Z(A){return 32===A||9===A||10===A||13===A}const X=[a(K(":")),n(K("A"),K("Z")),a(K("_")),n(K("a"),K("z")),n(192,214),n(216,246),n(192,214),n(216,246),n(248,767),n(880,893),n(895,8191),n(8204,8205),n(8304,8591),n(11264,12271),n(12289,55295),n(63744,64975),n(65008,65533),n(65536,983039)].reduce(G),k=[X,a(K("-")),a(K(".")),n(K("0"),K("9")),a(183),n(768,879),n(8255,8256)].reduce(G),O=L.get("Nd"),v=y(O),N=Q(n(0,1114111),[L.get("P"),L.get("Z"),L.get("C")].reduce(G)),w=y(N);function Y(A){return 10!==A&&13!==A&&!b(A)}const j={s:Z,S:y(Z),i:X,I:y(X),c:k,C:y(k),d:O,D:v,w:N,W:w},U=C("*"),R=C("\\"),V=C("{"),W=C("}"),q=C("["),z=C("]"),$=C("^"),_=C("$"),AA=C(","),BA=C("-"),aA=C("("),nA=C(")"),eA=C("."),tA=C("|"),GA=C("+"),iA=C("?"),rA=C("-["),oA=K("0");function lA(A){function B(A){return new Set(A.split("").map(A=>K(A)))}function t(A,B){const a=A.codePointAt(B);return void 0===a?u(B,["any character"]):l(B+String.fromCodePoint(a).length,a)}const i="xpath"===A.language?f(R,D([s(C("n"),()=>10),s(C("r"),()=>13),s(C("t"),()=>9),s(D([R,tA,eA,BA,$,iA,U,GA,V,W,_,aA,nA,q,z]),A=>K(A))])):f(R,D([s(C("n"),()=>10),s(C("r"),()=>13),s(C("t"),()=>9),s(D([R,tA,eA,BA,$,iA,U,GA,V,W,aA,nA,q,z]),A=>K(A))]));function r(A,a){const n=B(a);return d(C(A),m(c(t,A=>n.has(A),a.split(""))),(A,B)=>function(A){const B=L.get(A);if(null==B)throw new Error(A+" is not a valid unicode category");return B}(null===B?A:A+String.fromCodePoint(B)))}const o=D([r("L","ultmo"),r("M","nce"),r("N","dlo"),r("P","cdseifo"),r("Z","slp"),r("S","mcko"),r("C","cfon")]),H=[n(K("a"),K("z")),n(K("A"),K("Z")),n(K("0"),K("9")),a(45)].reduce(G),T=D([o,s(f(C("Is"),function(A){return(B,a)=>{const n=A(B,a);return n.success?l(n.offset,B.slice(a,n.offset)):n}}(I(c(t,H,["block identifier"])))),B=>function(A,B){const a=x.get(A);if(void 0===a){if(B)return e;throw new Error(`The unicode block identifier "${A}" is not known.`)}return a}(B,"xpath"!==A.language))]),J=g(C("\\p{"),T,W,!0),S=s(g(C("\\P{"),T,W,!0),y),b=f(R,s(D("sSiIcCdDwW".split("").map(A=>C(A))),A=>j[A])),Z=s(eA,()=>Y),X=D([b,J,S]),k=B("\\[]"),O=D([i,c(t,A=>!k.has(A),["unescaped character"])]),v=D([s(BA,()=>null),O]),N=d(v,f(BA,v),n);function w(A,B){return[A].concat(B||[])}const lA=s(function(A){return(B,a)=>{const n=A(B,a);return n.success?l(a,n.value):n}}(D([z,rA])),()=>null),HA=K("-"),uA=D([s(E(E(BA,F(q,["not ["])),lA),()=>HA),f(F(BA,["not -"]),O)]),CA=D([d(s(uA,a),D([function(A,B){return CA(A,B)},lA]),w),d(D([N,X]),D([cA,lA]),w)]);const sA=D([d(s(O,a),D([CA,lA]),w),d(D([N,X]),D([cA,lA]),w)]);function cA(A,B){return sA(A,B)}const DA=s(sA,A=>A.reduce(G)),mA=s(f($,DA),y),hA=d(D([f(F($,["not ^"]),DA),mA]),m(f(BA,(function(A,B){return dA(A,B)}))),Q),dA=g(q,hA,z,!0);const IA="xpath"===A.language?D([s(i,a),X,dA,Z,s($,()=>A=>-1===A),s(_,()=>A=>-2===A)]):D([s(i,a),X,dA,Z]),pA="xpath"===A.language?B(".\\?*+{}()|^$[]"):B(".\\?*+{}()|[]"),TA=c(t,A=>!pA.has(A),["NormalChar"]),fA=s(f(R,d(s(c(t,n(K("1"),K("9")),["digit"]),A=>A-oA),h(s(c(t,n(oA,K("9")),["digit"]),A=>A-oA)),(A,B)=>{B.reduce((A,B)=>10*A+B,A)})),A=>{throw new Error("Backreferences in XPath patterns are not yet implemented.")}),EA="xpath"===A.language?D([s(TA,A=>({kind:"predicate",value:a(A)})),s(IA,A=>({kind:"predicate",value:A})),s(g(aA,f(m(C("?:")),SA),nA,!0),A=>({kind:"regexp",value:A})),fA]):D([s(TA,A=>({kind:"predicate",value:a(A)})),s(IA,A=>({kind:"predicate",value:A})),s(g(aA,SA,nA,!0),A=>({kind:"regexp",value:A}))]),gA=s(I(s(c(t,n(oA,K("9")),["digit"]),A=>A-oA)),A=>A.reduce((A,B)=>10*A+B)),FA=D([d(gA,f(AA,gA),(A,B)=>{if(B<A)throw new Error("quantifier range is in the wrong order");return{min:A,max:B}}),d(gA,AA,A=>({min:A,max:null})),s(gA,A=>({min:A,max:A}))]),PA="xpath"===A.language?d(D([s(iA,()=>({min:0,max:1})),s(U,()=>({min:0,max:null})),s(GA,()=>({min:1,max:null})),g(V,FA,W,!0)]),m(iA),(A,B)=>A):D([s(iA,()=>({min:0,max:1})),s(U,()=>({min:0,max:null})),s(GA,()=>({min:1,max:null})),g(V,FA,W,!0)]),MA=h(d(EA,s(m(PA),A=>null===A?{min:1,max:1}:A),(A,B)=>[A,B])),JA=d(MA,h(f(tA,P(MA))),(A,B)=>[A].concat(B));function SA(A,B){return JA(A,B)}const KA=function(A){return d(A,M,p)}(JA);return function(A){let B;try{B=KA(A,0)}catch(B){throw new Error(`Error parsing pattern "${A}": ${B instanceof Error?B.message:B}`)}return B.success?B.value:function(A,B,a){const n=a.map(A=>`"${A}"`);throw new Error(`Error parsing pattern "${A}" at offset ${B}: expected ${n.length>1?"one of "+n.join(", "):n[0]} but found "${A.slice(B,B+1)}"`)}(A,B.offset,B.expected)}}function HA(A){return[...A].map(A=>A.codePointAt(0))}A.compile=function(A,a={language:"xsd"}){const n=lA(a)(A),e=B.compileVM(A=>{o(A,n,"xpath"===a.language),A.accept()});return function(A){const B="xpath"===a.language?[-1,...HA(A),-2]:HA(A);return e.execute(B).success}},Object.defineProperty(A,"__esModule",{value:!0})}));
//# sourceMappingURL=xspattern.umd.js.map
